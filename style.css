:root{
  --bg:#0b0f12; --panel:#12181d; --card:#1a2127; --muted:#8aa1b1;
  --text:#e7eef3; --accent:#1fb8cd; --border:#24303a; --red:#dc2626; --yellow:#fbbf24; --orange:#f59e0b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
.topbar{padding:10px 16px;border-bottom:1px solid var(--border);display:flex;gap:12px;align-items:baseline;position:sticky;top:0;background:rgba(11,15,18,.82);backdrop-filter:blur(6px);z-index:10}
.title{margin:0;font-size:18px}
.subtitle{color:var(--muted);font-size:12px}
.app{display:flex;height:calc(100vh - 56px);overflow:hidden}
.sidebar{width:360px;border-right:1px solid var(--border);overflow:auto;padding:16px;background:#10161b}
.map-wrap{flex:1;position:relative;min-width:0}
#map{position:absolute;inset:0}
.panel{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px 12px 8px;margin-bottom:14px}
.panel h2{font-size:14px;margin:0 0 8px}
.panel h3{font-size:13px;margin:8px 0 6px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.form-row{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
.form-row label{font-size:12px;color:var(--muted)}
select,input[type="range"],.btn{width:100%;padding:8px;border-radius:8px;border:1px solid var(--border);background:#0e1419;color:var(--text)}
.range{display:flex;flex-direction:column;gap:6px}
.range-label{font-size:12px;color:var(--muted)}
.toggles label{display:block;font-size:13px;margin:4px 0}
.btn{background:var(--accent);color:#00161b;font-weight:600;cursor:pointer}
.btn.full{width:100%}
.layer{display:block;margin:6px 0;font-size:13px}
.kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-bottom:6px}
.kpi{background:#0e1419;border:1px solid var(--border);border-radius:10px;padding:10px}
.kpi-num{font-size:18px;font-weight:700}
.kpi-label{font-size:11px;color:var(--muted)}
.notice{border:1px solid #b91c1c;background:#2a1212;color:#ffd5d5;padding:8px;border-radius:8px;font-size:12px;margin-bottom:8px}
.crash-list{display:flex;flex-direction:column;gap:6px;max-height:220px;overflow:auto}
.crash-item{display:flex;gap:8px;border:1px solid var(--border);border-radius:8px;padding:8px;background:#0e1419;cursor:pointer}
.crash-dot{width:10px;height:10px;border-radius:50%}
.crash-text{flex:1;min-width:0}
.crash-title{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.crash-sub{font-size:11px;color:#cfe5ee}
.toasts{position:absolute;top:12px;right:12px;display:flex;flex-direction:column;gap:6px;z-index:1000;pointer-events:none}
.toast{pointer-events:auto;padding:8px 10px;border-radius:8px;border:1px solid var(--border);background:#0e1419;font-size:12px}
.toast--success{border-color:#1bbf64}.toast--error{border-color:#bf1b1b}.toast--info{border-color:#1fb8cd}
.leaflet-container{background:#0a0e11}
.leaflet-control-container .leaflet-top,.leaflet-control-container .leaflet-bottom{z-index:500}
